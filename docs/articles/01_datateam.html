<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>General ADC/SASAP data team use • datamgmt</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="General ADC/SASAP data team use">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">datamgmt</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01_datateam.html">General ADC/SASAP data team use</a>
    </li>
    <li>
      <a href="../articles/02_pi.html">Functions for PI's</a>
    </li>
    <li>
      <a href="../articles/03_datadev.html">Advanced functions for package developers and contributors</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>General ADC/SASAP data team use</h1>
            
            <h4 class="date">Last updated 2018-03-13</h4>
          </div>

    
    
<div class="contents">
<div id="quality-assurance-for-data-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#quality-assurance-for-data-packages" class="anchor"></a>Quality Assurance for Data Packages</h2>
<p>Purpose: use <code>qa_package</code> to check a DataONE EML package. Will check that attributes match values in the data.</p>
<p>Note: this function also calls qa_attributes and passes the data object and associated dataTable, but that function can also be called directly.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/qa_package.html">qa_package</a></span>(mn, pid, 
           <span class="dt">readAllData =</span> <span class="ot">FALSE</span>, 
           <span class="dt">check_attributes =</span> <span class="ot">TRUE</span>, 
           <span class="dt">check_creators =</span> <span class="ot">FALSE</span>, 
           <span class="dt">check_access =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="create-attributes-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#create-attributes-tables" class="anchor"></a>Create attributes tables</h2>
<p>The <code>create_attributes_table</code> allows editing of an attribute table and custom units table in a shiny environment</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/create_attributes_table.html">create_attributes_table</a></span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>)

data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">"Test.csv"</span>)
<span class="kw"><a href="../reference/create_attributes_table.html">create_attributes_table</a></span>(data, <span class="ot">NULL</span>)

attributes_table &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/EML/topics/get_attributes">get_attributes</a></span>(eml<span class="op">@</span>dataset<span class="op">@</span>dataTable[[i]]<span class="op">@</span>attributeList)<span class="op">$</span>attributes
<span class="kw"><a href="../reference/create_attributes_table.html">create_attributes_table</a></span>(<span class="ot">NULL</span>, attributes_table)

<span class="kw"><a href="../reference/create_attributes_table.html">create_attributes_table</a></span>(data, attributes_table)</code></pre></div>
</div>
<div id="get-custom-unit-data-frame" class="section level2">
<h2 class="hasAnchor">
<a href="#get-custom-unit-data-frame" class="anchor"></a>Get custom unit data frame</h2>
<p>The <code>get_custom_units</code> function uses the udunits2 unit library to format inputted unit into an EML unit form.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#The following all return the same data frame.</span>
<span class="kw"><a href="../reference/get_custom_units.html">get_custom_units</a></span>(<span class="st">'kilometersPerSquareSecond'</span>) <span class="co">#preferred input form</span>
<span class="kw"><a href="../reference/get_custom_units.html">get_custom_units</a></span>(<span class="st">'Kilometers per seconds squared'</span>)
<span class="kw"><a href="../reference/get_custom_units.html">get_custom_units</a></span>(<span class="st">'km/s^2'</span>)
<span class="kw"><a href="../reference/get_custom_units.html">get_custom_units</a></span>(<span class="st">'km s-2'</span>)
<span class="kw"><a href="../reference/get_custom_units.html">get_custom_units</a></span>(<span class="st">'s-2 /     kilometers-1'</span>) <span class="co">#works but is not advised</span></code></pre></div>
</div>
<div id="adding-an-orcid-to-a-creator" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-an-orcid-to-a-creator" class="anchor"></a>Adding an ORCID to a creator</h2>
<p>A complete data package requires that at minimum one creator includes an associated ORCID ID. The function <code>add_creator_id</code> allows you to add an ORCID or reference ID to any creator in EML.</p>
<p>The function invisibly returns the full EML, which can be saved to a variable. It also prints the changed creator entry so that it’s easy to check that the appropriate change was made. In addition to the EML, at least one of either the orcid or reference id is required.</p>
<p>Note: updated creator information cannot be used as a reference for associatedParties because the extra “role” field is required. Also, the function does not (yet) account for cases in which multiple creators have the same surname.</p>
<p>Example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eml_path &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">system.file</span>(<span class="dt">package =</span> <span class="st">"datamgmt"</span>), <span class="st">"dummy_meta_full.xml"</span>)
eml &lt;-<span class="st"> </span>EML<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/EML/topics/read_eml">read_eml</a></span>(eml_path_original)
<span class="kw"><a href="../reference/add_creator_id.html">add_creator_id</a></span>(eml, <span class="dt">orcid =</span> <span class="st">"https://orcid.org/WWWW-XXXX-YYYY-ZZZZ"</span>)

eml &lt;-<span class="st"> </span>eml <span class="op">%&gt;%</span>
<span class="st">           </span><span class="kw"><a href="../reference/add_creator_id.html">add_creator_id</a></span>(<span class="dt">surname =</span> <span class="st">"high-stakes"</span>,
                          <span class="dt">orcid =</span> <span class="st">"https://orcid.org/0000-1234-5678-4321"</span>,
                          <span class="dt">id =</span> <span class="st">"henrietta"</span>)

<span class="co">#use references to add updated contact info to Henrietta's other roles</span>
eml<span class="op">@</span>dataset<span class="op">@</span>contact[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">'contact'</span>, <span class="dt">reference =</span> <span class="st">"henrietta"</span>)
eml<span class="op">@</span>dataset<span class="op">@</span>metadataProvider[[<span class="dv">1</span>]] &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">'metadataProvider'</span>, <span class="dt">reference =</span> <span class="st">"henrietta"</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#quality-assurance-for-data-packages">Quality Assurance for Data Packages</a></li>
      <li><a href="#create-attributes-tables">Create attributes tables</a></li>
      <li><a href="#get-custom-unit-data-frame">Get custom unit data frame</a></li>
      <li><a href="#adding-an-orcid-to-a-creator">Adding an ORCID to a creator</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matt Jones, Dominic Mullen, Irene Steves, Mitchell Maier.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
